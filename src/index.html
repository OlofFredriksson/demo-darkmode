<!doctype html>
<html lang="en" data-color-mode="auto">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Dark mode</title>
        <link rel="stylesheet" href="styles/variables.css" />
        <link rel="stylesheet" href="styles/portal.css" />

        <script type="module">
            const htmlElement = document.documentElement;
            const sessionKey = "color-mode";

            let storedMode = null;
            try {
                storedMode = sessionStorage.getItem(sessionKey);
            } catch (error) {
                storedMode = null;
            }

            if (storedMode) {
                htmlElement.setAttribute("data-color-mode", storedMode);
            }

            const initColorModeSelect = () => {
                const colorModeSelect = document.getElementById("colorModeSelect");
                if (!colorModeSelect) {
                    return;
                }

                const initialMode = storedMode || htmlElement.getAttribute("data-color-mode") || "auto";
                colorModeSelect.value = initialMode;

                colorModeSelect.addEventListener("change", (e) => {
                    const nextMode = e.target.value;
                    htmlElement.setAttribute("data-color-mode", nextMode);
                    try {
                        sessionStorage.setItem(sessionKey, nextMode);
                    } catch (error) {
                        // Ignore storage errors
                    }
                });
            };

            if (document.readyState === "loading") {
                document.addEventListener("DOMContentLoaded", initColorModeSelect);
            } else {
                initColorModeSelect();
            }
        </script>
    </head>
    <body>
        <link rel="stylesheet" href="styles/header.css" />
        <header>
            <h1>Demo Site</h1>
            <nav>
                <a href="#">Link 1</a>
                <a href="#">Link 2</a>
                <select id="colorModeSelect" aria-label="Color mode">
                    <option value="auto">Auto</option>
                    <option value="dark">Dark</option>
                    <option value="light">Light</option>
                </select>
            </nav>
        </header>
        <main>
            <h1>Dark mode</h1>
            <link rel="stylesheet" href="styles/application.css" />
            <div id="app">
                <div class="card">
                    <p>En styck avancerad applikation med ett Kort</p>
                </div>
                <div class="my-fancy-component"><p>Hemmasnickrad komponent</p></div>
            </div>
        </main>
        <link rel="stylesheet" href="styles/footer.css" />
        <footer>
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Ett</h3>
                    <ul>
                        <li><a href="#">Lorem ipsum dolor</a></li>
                        <li><a href="#">Sit amet consectetur</a></li>
                        <li><a href="#">Adipiscing elit sed</a></li>
                        <li><a href="#">Do eiusmod tempor</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Tv√•</h3>
                    <ul>
                        <li><a href="#">Incididunt ut labore</a></li>
                        <li><a href="#">Et dolore magna aliqua</a></li>
                        <li><a href="#">Ut enim ad minim</a></li>
                        <li><a href="#">Veniam quis nostrud</a></li>
                    </ul>
                </div>
            </div>
        </footer>
    </body>
</html>
